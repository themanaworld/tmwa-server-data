//

013-3.gat,177,22,0|script|Chest#sword|111
{
    callfunc "ClearVariables";
    if (FLAGS & FLAG_HURNSMINE_CHEST) goto L_Finished;

    mes "[Chest]";
    mes "Would you try to open it?";
    next;
    menu
        "Yes.", L_Yes,
        "No.", L_Close;

L_Yes:
    setarray @getitem$, "ShortSword";
    setarray @getitem, 1;
    setarray @delitem$, "TreasureKey";
    setarray @delitem, 10;
    callfunc "CheckInventory";
    if(@check_fail) close;
    mes "[Chest]";
    mes "You opened it and found a short sword!";
    set FLAGS, FLAGS | FLAG_HURNSMINE_CHEST;
    close;

L_Finished:
    mes "[Chest]";
    mes "You already opened this chest.";
    close;

L_Close:
    close;
}
