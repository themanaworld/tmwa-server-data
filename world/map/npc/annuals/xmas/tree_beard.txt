// Annual Xmas Environment changes
020-1.gat,90,78,0|script|Confused Tree#Tree|380,
{
    callfunc "ConfusedTree";
    end;
}

020-1.gat,90,78,0|script|Confused Tree#XmasTree|379,
{
    callfunc "ConfusedTree";
    end;
}

020-1.gat,90,79,0|script|Present#1|386,
{
    callfunc "XmasStates";
    callfunc "XmasMainItemReward";
    close;
}

009-1.gat,54,38,0|script|Confused Tree#TreeNoSnow|394,
{
    callfunc "ConfusedTree";
    end;
}

009-1.gat,54,38,0|script|Confused Tree#XmasTreeNoSnow|381,
{
    callfunc "ConfusedTree";
    end;
}

009-1.gat,54,39,0|script|Present#2|386,
{
    callfunc "XmasStates";
    callfunc "XmasMainItemReward";
    close;
}

001-1.gat,41,45,0|script|Confused Tree#PalmTree|384,
{
    callfunc "ConfusedTree";
    end;
}

001-1.gat,41,46,0|script|Present#3|386,
{
    callfunc "XmasStates";
    callfunc "XmasMainItemReward";
    close;
}

001-1.gat,41,45,0|script|Confused Tree#XmasPalmTree|383,
{
    callfunc "ConfusedTree";
    end;
}

function|script|SpawnMobs|,
{
    cmdothernpc "XmasSpawnManager", "SpawnStart";
    return;
}

function|script|PresentHandler|,
{
    if($@xmas_time == $@xmas_reward_time)
        goto L_DeliverPresents;
    goto L_DisablePresents;

L_DeliverPresents:
    enablenpc "Present#1";
    enablenpc "Present#2";
    enablenpc "Present#3";
    goto L_Return;

L_DisablePresents:
    disablenpc "Present#1";
    disablenpc "Present#2";
    disablenpc "Present#3";
    goto L_Return;

L_Return:
    return;
}

function|script|ReplaceTrees|,
{
    if($@xmas_time)
        goto L_XmasTree;
    goto L_Tree;

L_XmasTree:
    disablenpc "Confused Tree#Tree";
    enablenpc "Confused Tree#XmasTree";
    disablenpc "Confused Tree#TreeNoSnow";
    enablenpc "Confused Tree#XmasTreeNoSnow";
    disablenpc "Confused Tree#PalmTree";
    enablenpc "Confused Tree#XmasPalmTree";
    goto L_Return;

L_Tree:
    disablenpc "Confused Tree#XmasTree";
    enablenpc "Confused Tree#Tree";
    disablenpc "Confused Tree#XmasTreeNoSnow";
    enablenpc "Confused Tree#TreeNoSnow";
    disablenpc "Confused Tree#XmasPalmTree";
    enablenpc "Confused Tree#PalmTree";
    goto L_Return;

L_Return:
    return;
}
