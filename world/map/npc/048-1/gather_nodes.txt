// NodeManager
048-1.gat,0,0,0|script|#NodeManager59|400,
{
    end;

OnTimer25000:
    stopnpctimer;
    cleararray $@NodesFiftynineSpawned, "", getarraysize($@NodesFiftynineSpawned);
    goto L_EnableSpawns;

L_EnableSpawns:
    set $@RandomFiftynineNodeLoop, 0;
    set $@RandomFiftynineNode, rand(getarraysize($@NodeManagerFiftynineSpawn));
    goto L_CheckNotEnabled;

L_CheckNotEnabled:
    if ($@RandomFiftynineNode == $@NodesFiftynineSpawned[$@RandomFiftynineNodeLoop])
        goto L_EnableSpawns;
    goto L_CheckNotEnabledLoop;

L_CheckNotEnabledLoop:
    set $@RandomFiftynineNodeLoop, ($@RandomFiftynineNodeLoop + 1);
    if ($@RandomFiftynineNodeLoop >= getarraysize($@NodesFiftynineSpawned))
        goto L_Enable;
    goto L_CheckNotEnabled;

L_Enable:
    enablenpc "#Node"+$@NodeManagerFiftynineSpawn[$@RandomFiftynineNode];
    setarray $@NodesFiftynineSpawned[$@NodeManagerFiftynineSpawnCount], $@RandomFiftynineNode;
    goto L_EnableCheck;

L_EnableCheck:
    set $@NodeManagerFiftynineSpawnCount, ($@NodeManagerFiftynineSpawnCount + 1);
    if ($@NodeManagerFiftynineSpawnMax > $@NodeManagerFiftynineSpawnCount)
        goto L_EnableSpawns;
    goto L_End;
 
L_Start:
    initnpctimer;
    goto L_End;

L_DisableSpawns:
    set $@RandomFiftynineNodeLoop, 0;
    set $@RandomFiftynineNode, rand(getarraysize($@NodeManagerFiftynineSpawn));
    goto L_CheckNotDisabled;

L_CheckNotDisabled:
    if ($@RandomFiftynineNode == $@NodesFiftynineSpawned[$@RandomFiftynineNodeLoop])
        goto L_DisableSpawns;
    goto L_CheckNotDisabledLoop;

L_CheckNotDisabledLoop:
    set $@RandomFiftynineNodeLoop, ($@RandomFiftynineNodeLoop + 1);
    if ($@RandomFiftynineNodeLoop >= getarraysize($@NodesFiftynineSpawned))
        goto L_Disable;
    goto L_CheckNotDisabled;

L_Disable:
    disablenpc "#Node"+$@NodeManagerFiftynineSpawn[$@RandomFiftynineNode];
    setarray $@NodesFiftynineSpawned[$@DisableFiftynineSpawnsLoop], $@RandomFiftynineNode;
    goto L_DisableCheck;

L_DisableCheck:
    set $@DisableFiftynineSpawnsLoop, ($@DisableFiftynineSpawnsLoop + 1);
    if ($@NodeManagerFiftynineSpawnMax > $@DisableFiftynineSpawnsLoop)
        goto L_DisableSpawns;
    goto L_End;

OnCommandTally:
    set $@NodeManagerFiftynineSpawnCount, ($@NodeManagerFiftynineSpawnCount - 1);
    if ($@NodeManagerFiftynineSpawnCount)
        goto L_End;
    goto L_Start;

OnInit:
    set $@DisableFiftynineSpawnsLoop, 0;
    set $@NodeManagerFiftynineSpawnMax, 3;
    set $@NodeManagerFiftynineSpawnCount, 3;
    setarray $@NodeManagerFiftynineSpawn, 387, 388, 389, 390, 391, 392;
    cleararray $@NodesFiftynineSpawned, "", getarraysize($@NodesFiftynineSpawned);
    goto L_DisableSpawns;

L_End:
    end;
}
// Gather Node NPC
048-1.gat,139,69,0|script|#Node387|602,
{
    set @NodeId, 387;
    set @NodeManagerId, 59;
    setarray @npc_loc, 139, 69, 2;
    callfunc "CobaltPlant";
    end;
}
// Gather Node NPC
048-1.gat,87,77,0|script|#Node388|602,
{
    set @NodeId, 388;
    set @NodeManagerId, 59;
    setarray @npc_loc, 87, 77, 2;
    callfunc "CobaltPlant";
    end;
}
// Gather Node NPC
048-1.gat,57,95,0|script|#Node389|602,
{
    set @NodeId, 389;
    set @NodeManagerId, 59;
    setarray @npc_loc, 57, 95, 2;
    callfunc "CobaltPlant";
    end;
}
// Gather Node NPC
048-1.gat,37,83,0|script|#Node390|602,
{
    set @NodeId, 390;
    set @NodeManagerId, 59;
    setarray @npc_loc, 37, 83, 2;
    callfunc "CobaltPlant";
    end;
}
// Gather Node NPC
048-1.gat,43,26,0|script|#Node391|602,
{
    set @NodeId, 391;
    set @NodeManagerId, 59;
    setarray @npc_loc, 43, 26, 2;
    callfunc "CobaltPlant";
    end;
}
// Gather Node NPC
048-1.gat,81,61,0|script|#Node392|602,
{
    set @NodeId, 392;
    set @NodeManagerId, 59;
    setarray @npc_loc, 81, 61, 2;
    callfunc "CobaltPlant";
    end;
}
