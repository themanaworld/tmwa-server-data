// Mining Nodes
// Author: wushin

// NodeManager
055-1.gat,0,0,0|script|#NodeManager41|400,
{
    end;

OnTimer25000:
    stopnpctimer;
    cleararray $@NodesFortyoneSpawned, "", getarraysize($@NodesFortyoneSpawned);
    goto L_EnableSpawns;

L_EnableSpawns:
    set $@RandomFortyoneNodeLoop, 0;
    set $@RandomFortyoneNode, rand(getarraysize($@NodeManagerFortyoneSpawn));
    goto L_CheckNotEnabled;

L_CheckNotEnabled:
    if ($@RandomFortyoneNode == $@NodesFortyoneSpawned[$@RandomFortyoneNodeLoop])
        goto L_EnableSpawns;
    goto L_CheckNotEnabledLoop;

L_CheckNotEnabledLoop:
    set $@RandomFortyoneNodeLoop, ($@RandomFortyoneNodeLoop + 1);
    if ($@RandomFortyoneNodeLoop >= getarraysize($@NodesFortyoneSpawned))
        goto L_Enable;
    goto L_CheckNotEnabled;

L_Enable:
    enablenpc "#Node"+$@NodeManagerFortyoneSpawn[$@RandomFortyoneNode];
    setarray $@NodesFortyoneSpawned[$@NodeManagerFortyoneSpawnCount], $@RandomFortyoneNode;
    goto L_EnableCheck;

L_EnableCheck:
    set $@NodeManagerFortyoneSpawnCount, ($@NodeManagerFortyoneSpawnCount + 1);
    if ($@NodeManagerFortyoneSpawnMax > $@NodeManagerFortyoneSpawnCount)
        goto L_EnableSpawns;
    goto L_End;
 
L_Start:
    initnpctimer;
    goto L_End;

L_DisableSpawns:
    set $@RandomFortyoneNodeLoop, 0;
    set $@RandomFortyoneNode, rand(getarraysize($@NodeManagerFortyoneSpawn));
    goto L_CheckNotDisabled;

L_CheckNotDisabled:
    if ($@RandomFortyoneNode == $@NodesFortyoneSpawned[$@RandomFortyoneNodeLoop])
        goto L_DisableSpawns;
    goto L_CheckNotDisabledLoop;

L_CheckNotDisabledLoop:
    set $@RandomFortyoneNodeLoop, ($@RandomFortyoneNodeLoop + 1);
    if ($@RandomFortyoneNodeLoop >= getarraysize($@NodesFortyoneSpawned))
        goto L_Disable;
    goto L_CheckNotDisabled;

L_Disable:
    disablenpc "#Node"+$@NodeManagerFortyoneSpawn[$@RandomFortyoneNode];
    setarray $@NodesFortyoneSpawned[$@DisableFortyoneSpawnsLoop], $@RandomFortyoneNode;
    goto L_DisableCheck;

L_DisableCheck:
    set $@DisableFortyoneSpawnsLoop, ($@DisableFortyoneSpawnsLoop + 1);
    if ($@NodeManagerFortyoneSpawnMax > $@DisableFortyoneSpawnsLoop)
        goto L_DisableSpawns;
    goto L_End;

OnCommandTally:
    set $@NodeManagerFortyoneSpawnCount, ($@NodeManagerFortyoneSpawnCount - 1);
    if ($@NodeManagerFortyoneSpawnCount)
        goto L_End;
    goto L_Start;

OnInit:
    set $@DisableFortyoneSpawnsLoop, 0;
    set $@NodeManagerFortyoneSpawnMax, 3;
    set $@NodeManagerFortyoneSpawnCount, 3;
    setarray $@NodeManagerFortyoneSpawn, 258, 259, 260, 261, 262, 263;
    cleararray $@NodesFortyoneSpawned, "", getarraysize($@NodesFortyoneSpawned);
    goto L_DisableSpawns;

L_End:
    end;
}

// Gather Node NPC
055-1.gat,56,71,0|script|#Node258|601,
{
    set @NodeId, 258;
    set @NodeManagerId, 41;
    setarray @npc_loc, 56, 71, 2;
    callfunc "MauvePlant";
    end;
}

// Gather Node NPC
055-1.gat,110,25,0|script|#Node259|601,
{
    set @NodeId, 259;
    set @NodeManagerId, 41;
    setarray @npc_loc, 110, 25, 2;
    callfunc "MauvePlant";
    end;
}

// Gather Node NPC
055-1.gat,72,63,0|script|#Node260|603,
{
    set @NodeId, 260;
    set @NodeManagerId, 41;
    setarray @npc_loc, 72, 63, 2;
    callfunc "GambrogePlant";
    end;
}

// Gather Node NPC
055-1.gat,54,27,0|script|#Node261|603,
{
    set @NodeId, 261;
    set @NodeManagerId, 41;
    setarray @npc_loc, 54, 27, 2;
    callfunc "GambrogePlant";
    end;
}

// Gather Node NPC
055-1.gat,68,80,0|script|#Node262|601,
{
    set @NodeId, 262;
    set @NodeManagerId, 41;
    setarray @npc_loc, 68, 80, 2;
    callfunc "MauvePlant";
    end;
}

// Gather Node NPC
055-1.gat,131,34,0|script|#Node263|601,
{
    set @NodeId, 263;
    set @NodeManagerId, 41;
    setarray @npc_loc, 131, 34, 2;
    callfunc "MauvePlant";
    end;
}
// NodeManager
055-1.gat,0,0,0|script|#NodeManager42|400,
{
    end;

OnTimer25000:
    stopnpctimer;
    cleararray $@NodesFortytwoSpawned, "", getarraysize($@NodesFortytwoSpawned);
    goto L_EnableSpawns;

L_EnableSpawns:
    set $@RandomFortytwoNodeLoop, 0;
    set $@RandomFortytwoNode, rand(getarraysize($@NodeManagerFortytwoSpawn));
    goto L_CheckNotEnabled;

L_CheckNotEnabled:
    if ($@RandomFortytwoNode == $@NodesFortytwoSpawned[$@RandomFortytwoNodeLoop])
        goto L_EnableSpawns;
    goto L_CheckNotEnabledLoop;

L_CheckNotEnabledLoop:
    set $@RandomFortytwoNodeLoop, ($@RandomFortytwoNodeLoop + 1);
    if ($@RandomFortytwoNodeLoop >= getarraysize($@NodesFortytwoSpawned))
        goto L_Enable;
    goto L_CheckNotEnabled;

L_Enable:
    enablenpc "#Node"+$@NodeManagerFortytwoSpawn[$@RandomFortytwoNode];
    setarray $@NodesFortytwoSpawned[$@NodeManagerFortytwoSpawnCount], $@RandomFortytwoNode;
    goto L_EnableCheck;

L_EnableCheck:
    set $@NodeManagerFortytwoSpawnCount, ($@NodeManagerFortytwoSpawnCount + 1);
    if ($@NodeManagerFortytwoSpawnMax > $@NodeManagerFortytwoSpawnCount)
        goto L_EnableSpawns;
    goto L_End;
 
L_Start:
    initnpctimer;
    goto L_End;

L_DisableSpawns:
    set $@RandomFortytwoNodeLoop, 0;
    set $@RandomFortytwoNode, rand(getarraysize($@NodeManagerFortytwoSpawn));
    goto L_CheckNotDisabled;

L_CheckNotDisabled:
    if ($@RandomFortytwoNode == $@NodesFortytwoSpawned[$@RandomFortytwoNodeLoop])
        goto L_DisableSpawns;
    goto L_CheckNotDisabledLoop;

L_CheckNotDisabledLoop:
    set $@RandomFortytwoNodeLoop, ($@RandomFortytwoNodeLoop + 1);
    if ($@RandomFortytwoNodeLoop >= getarraysize($@NodesFortytwoSpawned))
        goto L_Disable;
    goto L_CheckNotDisabled;

L_Disable:
    disablenpc "#Node"+$@NodeManagerFortytwoSpawn[$@RandomFortytwoNode];
    setarray $@NodesFortytwoSpawned[$@DisableFortytwoSpawnsLoop], $@RandomFortytwoNode;
    goto L_DisableCheck;

L_DisableCheck:
    set $@DisableFortytwoSpawnsLoop, ($@DisableFortytwoSpawnsLoop + 1);
    if ($@NodeManagerFortytwoSpawnMax > $@DisableFortytwoSpawnsLoop)
        goto L_DisableSpawns;
    goto L_End;

OnCommandTally:
    set $@NodeManagerFortytwoSpawnCount, ($@NodeManagerFortytwoSpawnCount - 1);
    if ($@NodeManagerFortytwoSpawnCount)
        goto L_End;
    goto L_Start;

OnInit:
    set $@DisableFortytwoSpawnsLoop, 0;
    set $@NodeManagerFortytwoSpawnMax, 3;
    set $@NodeManagerFortytwoSpawnCount, 3;
    setarray $@NodeManagerFortytwoSpawn, 264, 265, 266, 267, 268, 269;
    cleararray $@NodesFortytwoSpawned, "", getarraysize($@NodesFortytwoSpawned);
    goto L_DisableSpawns;

L_End:
    end;
}

// Gather Node NPC
055-1.gat,92,40,0|script|#Node264|606,
{
    set @NodeId, 264;
    set @NodeManagerId, 42;
    setarray @npc_loc, 92, 40, 2;
    callfunc "Mushroom";
    end;
}

// Gather Node NPC
055-1.gat,104,26,0|script|#Node265|606,
{
    set @NodeId, 265;
    set @NodeManagerId, 42;
    setarray @npc_loc, 104, 26, 2;
    callfunc "Mushroom";
    end;
}

// Gather Node NPC
055-1.gat,46,23,0|script|#Node266|606,
{
    set @NodeId, 266;
    set @NodeManagerId, 42;
    setarray @npc_loc, 46, 23, 2;
    callfunc "Mushroom";
    end;
}

// Gather Node NPC
055-1.gat,100,91,0|script|#Node267|605,
{
    set @NodeId, 267;
    set @NodeManagerId, 42;
    setarray @npc_loc, 100, 91, 2;
    callfunc "CloverPatch";
    end;
}

// Gather Node NPC
055-1.gat,133,95,0|script|#Node268|605,
{
    set @NodeId, 268;
    set @NodeManagerId, 42;
    setarray @npc_loc, 133, 95, 2;
    callfunc "CloverPatch";
    end;
}

// Gather Node NPC
055-1.gat,42,97,0|script|#Node269|605,
{
    set @NodeId, 269;
    set @NodeManagerId, 42;
    setarray @npc_loc, 42, 97, 2;
    callfunc "CloverPatch";
    end;
}
// NodeManager
055-1.gat,0,0,0|script|#NodeManager63|400,
{
    end;

OnTimer25000:
    stopnpctimer;
    cleararray $@NodesSixtythreeSpawned, "", getarraysize($@NodesSixtythreeSpawned);
    goto L_EnableSpawns;

L_EnableSpawns:
    set $@RandomSixtythreeNodeLoop, 0;
    set $@RandomSixtythreeNode, rand(getarraysize($@NodeManagerSixtythreeSpawn));
    goto L_CheckNotEnabled;

L_CheckNotEnabled:
    if ($@RandomSixtythreeNode == $@NodesSixtythreeSpawned[$@RandomSixtythreeNodeLoop])
        goto L_EnableSpawns;
    goto L_CheckNotEnabledLoop;

L_CheckNotEnabledLoop:
    set $@RandomSixtythreeNodeLoop, ($@RandomSixtythreeNodeLoop + 1);
    if ($@RandomSixtythreeNodeLoop >= getarraysize($@NodesSixtythreeSpawned))
        goto L_Enable;
    goto L_CheckNotEnabled;

L_Enable:
    enablenpc "#Node"+$@NodeManagerSixtythreeSpawn[$@RandomSixtythreeNode];
    setarray $@NodesSixtythreeSpawned[$@NodeManagerSixtythreeSpawnCount], $@RandomSixtythreeNode;
    goto L_EnableCheck;

L_EnableCheck:
    set $@NodeManagerSixtythreeSpawnCount, ($@NodeManagerSixtythreeSpawnCount + 1);
    if ($@NodeManagerSixtythreeSpawnMax > $@NodeManagerSixtythreeSpawnCount)
        goto L_EnableSpawns;
    goto L_End;
 
L_Start:
    initnpctimer;
    goto L_End;

L_DisableSpawns:
    set $@RandomSixtythreeNodeLoop, 0;
    set $@RandomSixtythreeNode, rand(getarraysize($@NodeManagerSixtythreeSpawn));
    goto L_CheckNotDisabled;

L_CheckNotDisabled:
    if ($@RandomSixtythreeNode == $@NodesSixtythreeSpawned[$@RandomSixtythreeNodeLoop])
        goto L_DisableSpawns;
    goto L_CheckNotDisabledLoop;

L_CheckNotDisabledLoop:
    set $@RandomSixtythreeNodeLoop, ($@RandomSixtythreeNodeLoop + 1);
    if ($@RandomSixtythreeNodeLoop >= getarraysize($@NodesSixtythreeSpawned))
        goto L_Disable;
    goto L_CheckNotDisabled;

L_Disable:
    disablenpc "#Node"+$@NodeManagerSixtythreeSpawn[$@RandomSixtythreeNode];
    setarray $@NodesSixtythreeSpawned[$@DisableSixtythreeSpawnsLoop], $@RandomSixtythreeNode;
    goto L_DisableCheck;

L_DisableCheck:
    set $@DisableSixtythreeSpawnsLoop, ($@DisableSixtythreeSpawnsLoop + 1);
    if ($@NodeManagerSixtythreeSpawnMax > $@DisableSixtythreeSpawnsLoop)
        goto L_DisableSpawns;
    goto L_End;

OnCommandTally:
    set $@NodeManagerSixtythreeSpawnCount, ($@NodeManagerSixtythreeSpawnCount - 1);
    if ($@NodeManagerSixtythreeSpawnCount)
        goto L_End;
    goto L_Start;

OnInit:
    set $@DisableSixtythreeSpawnsLoop, 0;
    set $@NodeManagerSixtythreeSpawnMax, 3;
    set $@NodeManagerSixtythreeSpawnCount, 3;
    setarray $@NodeManagerSixtythreeSpawn, 411, 412, 413, 414, 415, 416;
    cleararray $@NodesSixtythreeSpawned, "", getarraysize($@NodesSixtythreeSpawned);
    goto L_DisableSpawns;

L_End:
    end;
}
// Gather Node NPC
055-1.gat,56,36,0|script|#Node411|610,
{
    set @NodeId, 411;
    set @NodeManagerId, 63;
    setarray @npc_loc, 56, 36, 2;
    callfunc "Beehive";
    end;
}
// Gather Node NPC
055-1.gat,103,29,0|script|#Node412|610,
{
    set @NodeId, 412;
    set @NodeManagerId, 63;
    setarray @npc_loc, 103, 29, 2;
    callfunc "Beehive";
    end;
}
// Gather Node NPC
055-1.gat,88,43,0|script|#Node413|610,
{
    set @NodeId, 413;
    set @NodeManagerId, 63;
    setarray @npc_loc, 88, 43, 2;
    callfunc "Beehive";
    end;
}
// Gather Node NPC
055-1.gat,54,74,0|script|#Node414|610,
{
    set @NodeId, 414;
    set @NodeManagerId, 63;
    setarray @npc_loc, 54, 74, 2;
    callfunc "Beehive";
    end;
}
// Gather Node NPC
055-1.gat,132,75,0|script|#Node415|610,
{
    set @NodeId, 415;
    set @NodeManagerId, 63;
    setarray @npc_loc, 132, 75, 2;
    callfunc "Beehive";
    end;
}
// Gather Node NPC
055-1.gat,73,23,0|script|#Node416|610,
{
    set @NodeId, 416;
    set @NodeManagerId, 63;
    setarray @npc_loc, 73, 23, 2;
    callfunc "Beehive";
    end;
}
